<html>
  <head>
    <title>Test Suite</title> 
    <script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
    <script src="../outliner.js"></script>
    <script>

      function assert(value, desc) {
        var li = document.createElement("li");
        li.className = value ? "pass" : "fail";
        li.appendChild(document.createTextNode(desc));
        document.getElementById("results").appendChild(li);
        return !!value;
      }

      function testOutline(rootId, expected) {
        var root = document.getElementById(rootId),
            madeOutline = makeOutline(root),
            result = assert(_.isEqual(madeOutline, expected), '#' + rootId);

        root.nextSibling.textContent = JSON.stringify(madeOutline, null, 2);

        if(!result) {
          console.log(rootId + ' made', madeOutline);
          console.log(rootId + ' expected', expected);
          root.className = 'fail';
        }
        return result;
      }

      window.onload = function() { 
        // Tests for the sample markup
        testOutline('test1', ['My fantastic site',['About me',['What I do for a living']],['Contact']]);
        testOutline('test2', ['HTML5 Doctor articles',['The section element'],['The article element']]);
        testOutline('test3', [['Untitled aside',['Twitter'],['Recent comments']]]);
        testOutline('test4', [['Title goes here']]);
        testOutline('test5', ['Top of the outline',['A heading in the outline'],['Another heading in the outline']]);
        testOutline('test6', ['My fantastic site',['About me',['What I do for a living']],['Contact']]);
        testOutline('test7', ['A',['C'],['E']]);
      };

    </script>
    <style> 
      body > div {width:45%;margin-right:5%;float:left;}
      pre {width:50%;float:right;}
      hr {clear:both;}
      .pass { color: green; } 
      .fail { color: red; }
    </style> 
  </head>
  <body> 
    <ul id="results"></ul>

    <hr />
    <div id="test1">
      <h1>My fantastic site</h1>
      <section>
        <h1>About me</h1>
        <p>I am a man who lives a fascinating life. Oh the stories I could tell you...</p>
        <section>
          <h1>What I do for a living</h1>
          <p>I sell enterprise-managed ant farms.</p>
        </section>
      </section>
      <section>
        <h1>Contact</h1>
        <p>Shout my name and I will come to you.</p>
      </section>
    </div>
    <pre></pre>

    <hr />
    <div id="test2">
      <h2>HTML5 Doctor articles</h2>
      <article>
        <h1>The section element</h1>
        <p>We doctors are a bunch of chums using HTML5 and writing about how we do it...</p>
      </article>
      <article>
        <h1>The article element</h1>
        <p>We've discussed a lot of new elements here at HTML5Doctor...</p>
      </article>
    </div>
    <pre></pre>

    <hr />
    <div id="test3">
      <aside>
        <section>
          <h2>Twitter</h2>
        </section>
        <section>
          <h2>Recent comments</h2>
        </section>
      </aside>
    </div>
    <pre></pre>

    <hr />
    <div id="test4">
      <article>
        <hgroup>
          <h1>Title goes here</h1>
          <h2>Subtitle of article</h2>
        </hgroup>
        <p>Lorem Ipsum dolor set amet</p>
      </article>
    </div>
    <pre></pre>

    <hr />
    <div id="test5">
      <h1>Top of the outline</h1>
      <section>
        <h2>A heading in the outline</h2>
        <p>Lorem ipsum dolor sit amet...</p>
      </section>
      <section>
        <h2>Another heading in the outline</h2>
        <p>Lorem ipsum dolor sit amet...</p>
        <blockquote>
          <h1>This quoted heading will not appear in the outline</h1>
          <p>Lorem ipsum dolor sit amet...</p>
        </blockquote>
      </section>
    </div>
    <pre></pre>

    <hr />
    <div id="test6">
      <h1>My fantastic site</h1>
      <h2>About me</h2>
      <p>I am a man who lives a fascinating life. Oh the stories I could tell you...</p>
      <h3>What I do for a living</h3>
      <p>I sell enterprise-managed ant farms.</p>
      <h2>Contact</h2>
      <p>Shout my name and I will come to you.</p>
    </div>
    <pre></pre>

    <hr />
    <div id="test7">
      <h1>A</h1>
      <p>B</p>
      <h2>C</h2>
      <p>D</p>
      <h2>E</h2>
      <p>F</p>
    </div>      
    <pre></pre>

  </body>
</html>
